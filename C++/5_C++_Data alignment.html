<!doctype html>
<html>
  <head>
    <meta charset="GB18030 ">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>岚博基尼by wojiaoxulan</title>
    <link rel="stylesheet" href="../stylesheets/styles.css">
    <link rel="stylesheet" href="../stylesheets/github-dark.css">
    <script src="javascripts/respond.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
 <link rel="shortcut icon" href="../images/lan.jpg" type="image/vnd.microsoft.icon" />
  </head>
  <body>
      <div id="header" align="center">
      <font size="6" >
      	岚的博客
      </font>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
      <div id="title">
       <img src="../images/snow.jpg" height="200" width="200"  style="float:left"/> <a href="https://wojiaoxulan.github.io"><font size="4">
      	&nbsp;&nbsp;博主：岚博基尼</font></a><br></br>
      	<font size="2"> 
      	&nbsp;&nbsp;格言：    学而时习之 锲而不舍<br></br>
      	&nbsp;&nbsp;email：   437694562@qq.com<br></br>
      	&nbsp;&nbsp;自我评价：教练！我想当码农！<br></br>
      	</font>
       <br clear="left"></br><hr>
       </div>
      
<div align="center">
<p></p>
<h1>数据对齐</h1>
<div align="left">

<ul>
<li><span style="color:#E53333;"><b>32位系统各类型所占字节数：</b></span><pre><code>char ：1个字节
指针变量:        4个字节（32位的寻址空间是2^32, 即32个bit，也就是4个字节。）
short int :      2个字节
int：            4个字节
unsigned int :   4个字节
float:           4个字节
double:          8个字节
long:            4个字节
long long:       8个字节
unsigned long:   4个字节</code></pre>
</li>
<li><span style="color:#E53333;"><b>64位系统各类型所占字节数：</b></span><pre><code>char ：          1个字节
指针变量:        8个字节
short int :      2个字节
int：            4个字节
unsigned int :   4个字节
float:           4个字节
double:          8个字节
long:            8个字节
long long:       8个字节
unsigned long:   8个字节</code></pre>
<br></li>
<li><span style="color:#E53333;"><b>数据对齐主要有两个原则:</b></span></li>
<li>第一个数据成员放在offset为0的地方，以后每个数据成员
的对齐按照#pragma pack指定的数值和这个数据成员自身长度中，比较小的那个进行。</li>
<li>在数据成员完成各自对齐之后，类(结构或联合)本身也要进行对齐，对齐将按
照#pragma pack指定的数值和结构(或联合)最大数据成员长度中，比较小的那个进行。
<br>
举例如下：<pre><code>struct A {
   int a;
   char b;
   short c;
};</code></pre>
　　结构体A占8字节。int a起始位置为0；char b起始位置为4；short c自身按照2对齐，
因此起始位置为6，和char b之间空了一个字节。此时共占8个字节。结构体中最长的类型为int a占4个字节，
因此整个结构体要4对齐，此时是满足的。
<br><br><br><pre><code>struct B {
   char b;
   int a;
   short c;
};</code></pre>
　　结构体B占12字节。char b起始位置为0；int a自身4对齐，因此起始位置为4，同b间隔
3字节；short c起始位置为8，满足自身对齐。此时结构体占10字节，由于结构体要和最长的成员int a对齐，
因此结构体B占12字节。
<br><br><br><pre><code> #pragma pack(2)
     struct C {
     char b;
     int a;
     short c;
 };</code></pre>
　　#pragma pack(2)表示如果成员长度超过2，则按照2对齐，反之按照自身长度对齐。
<br>　　例如结构体C，占8字节。char b占1字节，小于2字节，因此按照1对齐；int a占4字节，大于2字节，按照2对齐，
因此起始位置为2；short c占2字节，因此按照2对齐。此时结构体C占8字节，结构体2对齐，因此最终占8字节。
</code></pre>
</li>
</ul>
<span style="float:left;"><a href="./4_C++_binary search.html">上一章</a></span>
　　　　　　　　　　　　　　　　<a href="../C++_list.html">C++基础目录</a>
<span style="float:right;"><a href="./6_C++_copy constructor.html">下一章</a></span>


      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
